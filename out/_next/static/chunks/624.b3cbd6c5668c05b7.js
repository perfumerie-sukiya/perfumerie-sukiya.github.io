"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{4624:function(e,t,n){n.r(t),n.d(t,{exportDB:function(){return j},importDB:function(){return x},importInto:function(){return U},peakImportFile:function(){return B}});var r=n(9520),i=n(3454),o=n(1876).Buffer;function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(e){return[e.schema.primKey].concat(e.schema.indexes).map((function(e){return e.src})).join(",")}function c(e,t){return new Promise((function(n,r){var i=new FileReader;i.onabort=function(e){return r(new Error("file read aborted"))},i.onerror=function(e){return r(e.target.error)},i.onload=function(e){return n(e.target.result)},"binary"===t?i.readAsArrayBuffer(e):i.readAsText(e)}))}function f(e,t){if("undefined"===typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync;return"binary"===t?n.readAsArrayBuffer(e):n.readAsText(e)}var l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function p(e,t){return e(t={exports:{}},t.exports),t.exports}for(var d=p((function(e,t){e.exports=function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,s={}.hasOwnProperty,u=s.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function f(e,t){return h.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function l(e){return o.call(e).slice(8,-1)}function p(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=s.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&u.call(i)===u.call(n)}function d(e){return!(!e||"Object"!==l(e))&&(!a(e)||p(e,Object))}function y(t){return t&&"object"===(void 0===t?"undefined":e(t))}function h(o){var a=[],s=[],u={},l=this.types={},g=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=A(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return g(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return g(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var E=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),S(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return E(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return E(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var A=this.encapsulate=function(f,l,v){var g=(v=Object.assign({sync:!0},o,v)).sync,m={},w=[],E=[],A=[],S=!(v&&"cyclic"in v)||v.cyclic,T=v.encapsulateObserver,N=C("",f,S,l||{},A);function j(e){var t=Object.values(m);if(v.iterateNone)return t.length?t[0]:h.getJSONType(e);if(t.length){if(v.returnTypeNames)return[].concat(n(new Set(t)));e&&d(e)&&!e.hasOwnProperty("$types")?e.$types=m:e={$:e,$types:{$:m}}}else y(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!v.returnTypeNames&&e}return A.length?g&&v.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],s=t(a,7),u=s[0],c=s[2],f=s[3],l=s[4],d=s[5],y=s[6],h=C(u,i,c,f,o,!0,y),v=p(h,O);return u&&v?h.p.then((function(t){return l[d]=t,e(n,o)})):(u?l[d]=h:n=v?h.p:h,e(n,o))})))})).then((function(){return n}))}(N,A)).then(j):!g&&v.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():v.stringification&&g?[j(N)]:g?j(N):Promise.resolve(j(N));function _(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function C(t,n,o,s,u,c,f){var l=void 0,y={},g=void 0===n?"undefined":e(n),A=T?function(e){var r=f||s.type||h.getJSONType(n);T(Object.assign(e||y,{keypath:t,value:n,cyclic:o,stateObj:s,promisesData:u,resolvingTypesonPromise:c,awaitingTypesonPromise:p(n,O)},void 0!==r?{type:r}:{}))}:null;if(g in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===g&&(isNaN(n)||n===-1/0||n===1/0)?(l=P(t,n,s,u,!1,c,A))!==n&&(y={replaced:l}):l=n,A&&A(),l;if(null===n)return A&&A(),n;if(o&&!s.iterateIn&&!s.iterateUnsetNumeric){var S=w.indexOf(n);if(!(S<0))return m[t]="#",A&&A({cyclicKeypath:E[S]}),"#"+E[S];!0===o&&(w.push(n),E.push(t))}var N=d(n),j=i(n),x=(N||j)&&(!a.length||s.replaced)||s.iterateIn?n:P(t,n,s,u,N||j,null,A),B=void 0;if(x!==n?(l=x,y={replaced:x}):j||"array"===s.iterateIn?(B=new Array(n.length),y={clone:B}):N||"object"===s.iterateIn?y={clone:B={}}:""===t&&p(n,O)?(u.push([t,n,o,s,void 0,void 0,s.type]),l=n):l=n,A&&A(),v.iterateNone)return B||l;if(!B)return l;if(s.iterateIn){var U=function(e){var r={ownKeys:n.hasOwnProperty(e)};_(s,r,(function(){var r=t+(t?".":"")+b(e),i=C(r,n[e],!!o,s,u,c);p(i,O)?u.push([r,i,!!o,s,B,e,s.type]):void 0!==i&&(B[e]=i)}))};for(var I in n)U(I);A&&A({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+b(e);_(s,{ownKeys:!0},(function(){var t=C(r,n[e],!!o,s,u,c);p(t,O)?u.push([r,t,!!o,s,B,e,s.type]):void 0!==t&&(B[e]=t)}))})),A&&A({endIterateOwn:!0,end:!0});if(s.iterateUnsetNumeric){for(var L=n.length,k=function(e){if(!(e in n)){var r=t+(t?".":"")+e;_(s,{ownKeys:!1},(function(){var t=C(r,void 0,!!o,s,u,c);p(t,O)?u.push([r,t,!!o,s,B,e,s.type]):void 0!==t&&(B[e]=t)}))}},R=0;R<L;R++)k(R);A&&A({endIterateUnsetNumeric:!0,end:!0})}return B}function P(e,t,n,r,i,o,c){for(var f=i?a:s,l=f.length;l--;){var p=f[l];if(p.test(t,n)){var d=p.type;if(u[d]){var y=m[e];m[e]=y?[d].concat(y):d}return Object.assign(n,{type:d,replaced:!0}),!g&&p.replaceAsync||p.replace?(c&&c({replacing:!0}),C(e,p[g||!p.replaceAsync?"replace":"replaceAsync"](t,n),S&&"readonly",n,r,o,d)):(c&&c({typeDetected:!0}),C(e,t,S&&"readonly",n,r,o,d))}}return t}};this.encapsulateSync=function(e,t,n){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var S=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,s=e&&e.$types,c=!0;if(!s)return e;if(!0===s)return e.$;s.$&&d(s.$)&&(e=e.$,s=s.$,c=!1);var l=[],y={},h=function e(n,o,a,f,h,v){if(!c||"$types"!==n){var g=s[n];if(i(o)||d(o)){var O=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+b(t),o[t],a||O,f,O,t);p(r,w)?O[t]=void 0:void 0!==r&&(O[t]=r)})),o=O;l.length;){var E=t(l[0],4),A=E[0],S=E[1],T=E[2],N=E[3],j=m(A,S);if(p(j,w))T[N]=void 0;else{if(void 0===j)break;T[N]=j}l.splice(0,1)}}if(!g)return o;if("#"===g){var _=m(a,o.substr(1));return void 0===_&&l.push([a,o.substr(1),h,v]),_}var C=f.sync;return[].concat(g).reduce((function(e,t){var n=u[t];if(!n)throw new Error("Unregistered type: "+t);return n[C&&n.revive?"revive":!C&&n.reviveAsync?"reviveAsync":"revive"](e,y)}),o)}}("",e,null,n);return f(h=p(h,w)?void 0:h)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():h:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?h:Promise.resolve(h)};this.reviveSync=function(e,t){return S(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return S(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(h.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:s,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete u[e],delete l[e]),r){if("function"==typeof r){var f=r;r={test:function(e){return e&&e.constructor===f},replace:function(e){return v({},e)},revive:function(e){return v(Object.create(f.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var p={type:e,test:r.test.bind(r)};r.replace&&(p.replace=r.replace.bind(r)),r.replaceAsync&&(p.replaceAsync=r.replaceAsync.bind(r));var d="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(d,0,p):s.splice(d,0,p),r.revive||r.reviveAsync){var y={};r.revive&&(y.revive=r.revive.bind(r)),r.reviveAsync&&(y.reviveAsync=r.reviveAsync.bind(r)),u[e]=y}l[e]=r}}))})),this}}function v(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function b(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function g(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function m(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[g(t.substr(0,n))];return void 0===r?void 0:m(r,t.substr(n+1))}return e[g(t)]}function w(){}function O(e){this.p=new Promise(e)}return O.prototype.then=function(e,t){var n=this;return new O((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},O.prototype.catch=function(e){return this.then(null,e)},O.resolve=function(e){return new O((function(t){t(e)}))},O.reject=function(e){return new O((function(t,n){n(e)}))},["all","race"].map((function(e){O[e]=function(t){return new O((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),h.Undefined=w,h.Promise=O,h.isThenable=f,h.toStringTag=l,h.hasConstructorOf=p,h.isObject=y,h.isPlainObject=d,h.isUserObject=function e(t){if(!t||"Object"!==l(t))return!1;var n=a(t);return!n||p(t,Object)||e(n)},h.escapeKeyPathComponent=b,h.unescapeKeyPathComponent=g,h.getByKeyPath=m,h.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},h.JSON_TYPES=["null","boolean","number","string","array","object"],h}()})),y=p((function(e,t){e.exports=function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,a=Object.getPrototypeOf,s={}.hasOwnProperty,u=s.toString,c=["type","replaced","iterateIn","iterateUnsetNumeric"];function f(e,t){return v.isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function p(e){return o.call(e).slice(8,-1)}function d(t,n){if(!t||"object"!==(void 0===t?"undefined":e(t)))return!1;var r=a(t);if(!r)return!1;var i=s.call(r,"constructor")&&r.constructor;return"function"!=typeof i?null===n:"function"==typeof i&&null!==n&&u.call(i)===u.call(n)}function y(e){return!(!e||"Object"!==p(e))&&(!a(e)||d(e,Object))}function h(t){return t&&"object"===(void 0===t?"undefined":e(t))}function v(o){var a=[],s=[],u={},l=this.types={},p=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var a=A(e,null,r);return i(a)?JSON.stringify(a[0],t,n):a.then((function(e){return JSON.stringify(e,t,n)}))};this.stringifySync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var m=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),S(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return m(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return m(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var A=this.encapsulate=function(f,l,p){var b=(p=Object.assign({sync:!0},o,p)).sync,m={},w=[],O=[],A=[],S=!(p&&"cyclic"in p)||p.cyclic,T=p.encapsulateObserver,N=C("",f,S,l||{},A);function j(e){var t=Object.values(m);if(p.iterateNone)return t.length?t[0]:v.getJSONType(e);if(t.length){if(p.returnTypeNames)return[].concat(n(new Set(t)));e&&y(e)&&!e.hasOwnProperty("$types")?e.$types=m:e={$:e,$types:{$:m}}}else h(e)&&e.hasOwnProperty("$types")&&(e={$:e,$types:!0});return!p.returnTypeNames&&e}return A.length?b&&p.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function e(n,r){return Promise.all(r.map((function(e){return e[1].p}))).then((function(i){return Promise.all(i.map((function(i){var o=[],a=r.splice(0,1)[0],s=t(a,7),u=s[0],c=s[2],f=s[3],l=s[4],p=s[5],y=s[6],h=C(u,i,c,f,o,!0,y),v=d(h,E);return u&&v?h.p.then((function(t){return l[p]=t,e(n,o)})):(u?l[p]=h:n=v?h.p:h,e(n,o))})))})).then((function(){return n}))}(N,A)).then(j):!b&&p.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():p.stringification&&b?[j(N)]:b?j(N):Promise.resolve(j(N));function _(e,t,n){Object.assign(e,t);var r=c.map((function(t){var n=e[t];return delete e[t],n}));n(),c.forEach((function(t,n){e[t]=r[n]}))}function C(t,n,o,s,u,c,f){var l=void 0,h={},b=void 0===n?"undefined":e(n),A=T?function(e){var r=f||s.type||v.getJSONType(n);T(Object.assign(e||h,{keypath:t,value:n,cyclic:o,stateObj:s,promisesData:u,resolvingTypesonPromise:c,awaitingTypesonPromise:d(n,E)},void 0!==r?{type:r}:{}))}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===n||"number"===b&&(isNaN(n)||n===-1/0||n===1/0)?(l=P(t,n,s,u,!1,c,A))!==n&&(h={replaced:l}):l=n,A&&A(),l;if(null===n)return A&&A(),n;if(o&&!s.iterateIn&&!s.iterateUnsetNumeric){var S=w.indexOf(n);if(!(S<0))return m[t]="#",A&&A({cyclicKeypath:O[S]}),"#"+O[S];!0===o&&(w.push(n),O.push(t))}var N=y(n),j=i(n),x=(N||j)&&(!a.length||s.replaced)||s.iterateIn?n:P(t,n,s,u,N||j,null,A),B=void 0;if(x!==n?(l=x,h={replaced:x}):j||"array"===s.iterateIn?(B=new Array(n.length),h={clone:B}):N||"object"===s.iterateIn?h={clone:B={}}:""===t&&d(n,E)?(u.push([t,n,o,s,void 0,void 0,s.type]),l=n):l=n,A&&A(),p.iterateNone)return B||l;if(!B)return l;if(s.iterateIn){var U=function(e){var r={ownKeys:n.hasOwnProperty(e)};_(s,r,(function(){var r=t+(t?".":"")+g(e),i=C(r,n[e],!!o,s,u,c);d(i,E)?u.push([r,i,!!o,s,B,e,s.type]):void 0!==i&&(B[e]=i)}))};for(var I in n)U(I);A&&A({endIterateIn:!0,end:!0})}else r(n).forEach((function(e){var r=t+(t?".":"")+g(e);_(s,{ownKeys:!0},(function(){var t=C(r,n[e],!!o,s,u,c);d(t,E)?u.push([r,t,!!o,s,B,e,s.type]):void 0!==t&&(B[e]=t)}))})),A&&A({endIterateOwn:!0,end:!0});if(s.iterateUnsetNumeric){for(var L=n.length,k=function(e){if(!(e in n)){var r=t+(t?".":"")+e;_(s,{ownKeys:!1},(function(){var t=C(r,void 0,!!o,s,u,c);d(t,E)?u.push([r,t,!!o,s,B,e,s.type]):void 0!==t&&(B[e]=t)}))}},R=0;R<L;R++)k(R);A&&A({endIterateUnsetNumeric:!0,end:!0})}return B}function P(e,t,n,r,i,o,c){for(var f=i?a:s,l=f.length;l--;){var p=f[l];if(p.test(t,n)){var d=p.type;if(u[d]){var y=m[e];m[e]=y?[d].concat(y):d}return Object.assign(n,{type:d,replaced:!0}),!b&&p.replaceAsync||p.replace?(c&&c({replacing:!0}),C(e,p[b||!p.replaceAsync?"replace":"replaceAsync"](t,n),S&&"readonly",n,r,o,d)):(c&&c({typeDetected:!0}),C(e,t,S&&"readonly",n,r,o,d))}}return t}};this.encapsulateSync=function(e,t,n){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return A(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var S=this.revive=function(e,n){var a=(n=Object.assign({sync:!0},o,n)).sync,s=e&&e.$types,c=!0;if(!s)return e;if(!0===s)return e.$;s.$&&y(s.$)&&(e=e.$,s=s.$,c=!1);var l=[],p={},h=function e(n,o,a,f,h,v){if(!c||"$types"!==n){var b=s[n];if(i(o)||y(o)){var m=i(o)?new Array(o.length):{};for(r(o).forEach((function(t){var r=e(n+(n?".":"")+g(t),o[t],a||m,f,m,t);d(r,O)?m[t]=void 0:void 0!==r&&(m[t]=r)})),o=m;l.length;){var E=t(l[0],4),A=E[0],S=E[1],T=E[2],N=E[3],j=w(A,S);if(d(j,O))T[N]=void 0;else{if(void 0===j)break;T[N]=j}l.splice(0,1)}}if(!b)return o;if("#"===b){var _=w(a,o.substr(1));return void 0===_&&l.push([a,o.substr(1),h,v]),_}var C=f.sync;return[].concat(b).reduce((function(e,t){var n=u[t];if(!n)throw new Error("Unregistered type: "+t);return n[C&&n.revive?"revive":!C&&n.reviveAsync?"reviveAsync":"revive"](e,p)}),o)}}("",e,null,n);return f(h=d(h,O)?void 0:h)?a&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():h:!a&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():a?h:Promise.resolve(h)};this.reviveSync=function(e,t){return S(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return S(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach((function e(n){if(i(n))return n.map(e);n&&r(n).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(v.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var r=n[e],o=r.testPlainObjects?a:s,c=o.filter((function(t){return t.type===e}));if(c.length&&(o.splice(o.indexOf(c[0]),1),delete u[e],delete l[e]),r){if("function"==typeof r){var f=r;r={test:function(e){return e&&e.constructor===f},replace:function(e){return b({},e)},revive:function(e){return b(Object.create(f.prototype),e)}}}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var p={type:e,test:r.test.bind(r)};r.replace&&(p.replace=r.replace.bind(r)),r.replaceAsync&&(p.replaceAsync=r.replaceAsync.bind(r));var d="number"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?a.splice(d,0,p):s.splice(d,0,p),r.revive||r.reviveAsync){var y={};r.revive&&(y.revive=r.revive.bind(r)),r.reviveAsync&&(y.reviveAsync=r.reviveAsync.bind(r)),u[e]=y}l[e]=r}}))})),this}}function b(e,t){return r(t).map((function(n){e[n]=t[n]})),e}function g(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function m(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function w(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[m(t.substr(0,n))];return void 0===r?void 0:w(r,t.substr(n+1))}return e[m(t)]}function O(){}function E(e){this.p=new Promise(e)}E.prototype.then=function(e,t){var n=this;return new E((function(r,i){n.p.then((function(t){r(e?e(t):t)}),(function(e){n.p.catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))}))},E.prototype.catch=function(e){return this.then(null,e)},E.resolve=function(e){return new E((function(t){t(e)}))},E.reject=function(e){return new E((function(t,n){n(e)}))},["all","race"].map((function(e){E[e]=function(t){return new E((function(n,r){Promise[e](t.map((function(e){return e.p}))).then(n,r)}))}})),v.Undefined=O,v.Promise=E,v.isThenable=f,v.toStringTag=p,v.hasConstructorOf=d,v.isObject=h,v.isPlainObject=y,v.isUserObject=function e(t){if(!t||"Object"!==p(t))return!1;var n=a(t);return!n||d(t,Object)||e(n)},v.escapeKeyPathComponent=g,v.unescapeKeyPathComponent=m,v.getByKeyPath=w,v.getJSONType=function(t){return null===t?"null":i(t)?"array":void 0===t?"undefined":e(t)},v.JSON_TYPES=["null","boolean","number","string","array","object"];for(var A={userObject:{test:function(e,t){return v.isUserObject(e)},replace:function(e){return Object.assign({},e)},revive:function(e){return e}}},S=[[{sparseArrays:{testPlainObjects:!0,test:function(e){return Array.isArray(e)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return null},revive:function(e){}}}],{undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return null},revive:function(e){return new v.Undefined}}}],T={StringObject:{test:function(t){return"String"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===v.toStringTag(t)&&"object"===(void 0===t?"undefined":e(t))},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},N=[{nan:{test:function(e){return"number"==typeof e&&isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return NaN}}},{infinity:{test:function(e){return e===1/0},replace:function(e){return"Infinity"},revive:function(e){return 1/0}}},{negativeInfinity:{test:function(e){return e===-1/0},replace:function(e){return"-Infinity"},revive:function(e){return-1/0}}}],j={date:{test:function(e){return"Date"===v.toStringTag(e)},replace:function(e){var t=e.getTime();return isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(NaN):new Date(e)}}},_={regexp:{test:function(e){return"RegExp"===v.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},C={map:{test:function(e){return"Map"===v.toStringTag(e)},replace:function(e){return Array.from(e.entries())},revive:function(e){return new Map(e)}}},P={set:{test:function(e){return"Set"===v.toStringTag(e)},replace:function(e){return Array.from(e.values())},revive:function(e){return new Set(e)}}},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=new Uint8Array(256),U=0;U<x.length;U++)B[x.charCodeAt(U)]=U;var I=function(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o="",a=0;a<i;a+=3)o+=x[r[a]>>2],o+=x[(3&r[a])<<4|r[a+1]>>4],o+=x[(15&r[a+1])<<2|r[a+2]>>6],o+=x[63&r[a+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},L=function(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,a=void 0,s=void 0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);for(var u=new ArrayBuffer(n),c=new Uint8Array(u),f=0;f<t;f+=4)i=B[e.charCodeAt(f)],o=B[e.charCodeAt(f+1)],a=B[e.charCodeAt(f+2)],s=B[e.charCodeAt(f+3)],c[r++]=i<<2|o>>4,c[r++]=(15&o)<<4|a>>2,c[r++]=(3&a)<<6|63&s;return u},k={arraybuffer:{test:function(e){return"ArrayBuffer"===v.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),I(e))},revive:function(t,n){if(n.buffers||(n.buffers=[]),"object"===(void 0===t?"undefined":e(t)))return n.buffers[t.index];var r=L(t);return n.buffers.push(r),r}}},R="undefined"==typeof self?l:self,F={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=R[t];n&&(F[e.toLowerCase()]={test:function(e){return v.toStringTag(e)===t},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,a=e.index,s=void 0;return"index"in e?s=t.buffers[a]:(s=L(o),t.buffers.push(s)),new n(s,r,i)}})}));var D={dataview:{test:function(e){return"DataView"===v.toStringTag(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:I(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,a=void 0;return"index"in e?a=t.buffers[o]:(a=L(i),t.buffers.push(a)),new DataView(a,n,r)}}},J={IntlCollator:{test:function(e){return v.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return v.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return v.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function K(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var M={file:{test:function(e){return"File"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=K(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function(e){return new v.Promise((function(t,n){if(e.isClosed)n(new Error("The File is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}};return[A,S,T,N,j,_,{imagedata:{test:function(e){return"ImageData"===v.toStringTag(e)},replace:function(e){return{array:Array.from(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===v.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.onload=function(){n.drawImage(r,0,0)},r.src=e,createImageBitmap(t)}}},M,{file:M.file,filelist:{test:function(e){return"FileList"===v.toStringTag(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){function t(){this._files=arguments[0],this.length=this._files.length}return t.prototype.item=function(e){return this._files[e]},t.prototype[Symbol.toStringTag]="FileList",new t(e)}}},{blob:{test:function(e){return"Blob"===v.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.open("GET",URL.createObjectURL(e),!1),"undefined"!=typeof TextEncoder&&t.overrideMimeType("text/plain; charset=utf-16le"),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([K(n)],{type:t})},replaceAsync:function(e){return new v.Promise((function(t,n){if(e.isClosed)n(new Error("The Blob is closed"));else{var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(e,"UTF-16")}}))}}}].concat("function"==typeof Map?C:[],"function"==typeof Set?P:[],"function"==typeof ArrayBuffer?k:[],"function"==typeof Uint8Array?F:[],"function"==typeof DataView?D:[],"undefined"!=typeof Intl?J:[])}()})),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=new Uint8Array(256),b=0;b<h.length;b++)v[h.charCodeAt(b)]=b;var g=function(e,t,n){null!==n&&void 0!==n||(n=e.byteLength);for(var r=new Uint8Array(e,t||0,n),i=r.length,o="",a=0;a<i;a+=3)o+=h[r[a]>>2],o+=h[(3&r[a])<<4|r[a+1]>>4],o+=h[(15&r[a+1])<<2|r[a+2]>>6],o+=h[63&r[a+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},m=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var u=new ArrayBuffer(a),c=new Uint8Array(u),f=0;f<o;f+=4)t=v[e.charCodeAt(f)],n=v[e.charCodeAt(f+1)],r=v[e.charCodeAt(f+2)],i=v[e.charCodeAt(f+3)],c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&i;return u},w="undefined"===typeof self?global:self,O={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(e){var t=e,n=w[t];n&&(O[e.toLowerCase()+"2"]={test:function(e){return d.toStringTag(e)===t},replace:function(e){return{buffer:e.buffer,byteOffset:e.byteOffset,length:e.length}},revive:function(e){var t=e.buffer,r=e.byteOffset,i=e.length;return new n(t,r,i)}})}));var E={arraybuffer:{test:function(e){return"ArrayBuffer"===d.toStringTag(e)},replace:function(e){return g(e,0,e.byteLength)},revive:function(e){return m(e)}}},A=(new d).register(y),S="FileReaderSync"in self,T=[],N=0;A.register([E,O,{blob2:{test:function(e){return"Blob"===d.toStringTag(e)},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(S){var t=f(e,"binary"),n=g(t,0,t.byteLength);return{type:e.type,data:n}}T.push(e);var r={type:e.type,data:{start:N,end:N+e.size}};return console.log("b.size: "+e.size),N+=e.size,r},finalize:function(e,t){e.data=g(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([m(n)],{type:t})}}}]),A.mustFinalize=function(){return T.length>0},A.finalize=function(e){return a(void 0,void 0,void 0,(function(){var t,n,i,o,a,u,f,l,p,d;return s(this,(function(s){switch(s.label){case 0:return[4,c(new Blob(T),"binary")];case 1:if(t=s.sent(),e)for(n=0,i=e;n<i.length;n++)if((o=i[n]).$types)for(f in a=o.$types,(u=a.$)&&(a=a.$),a)l=a[f],(p=A.types[l])&&p.finalize&&(d=r.ZP.getByKeyPath(o,u?"$."+f:f),p.finalize(d,t.slice(d.start,d.end)));return T=[],[2]}}))}))};function j(e,t){return a(this,void 0,void 0,(function(){function n(){return a(this,void 0,void 0,(function(){var n,a,u,d,y,h,v,b,g;return s(this,(function(m){switch(m.label){case 0:return[4,Promise.all(e.tables.map((function(e){return e.count()})))];case 1:(n=m.sent()).forEach((function(e,t){return o[t].rowCount=e})),p.totalRows=n.reduce((function(e,t){return e+t})),a=JSON.stringify(f,void 0,c?2:void 0),u=a.lastIndexOf("]"),d=a.substring(0,u),i.push(d),y=t.filter,h=function(n){var o,a,u,f,d,h,v,b,g,m,w;return s(this,(function(O){switch(O.label){case 0:o=e.table(n),a=o.schema.primKey,u=!!a.keyPath,f=t.numRowsPerChunk||2e3,d=u?{tableName:o.name,inbound:!0,rows:[]}:{tableName:o.name,inbound:!1,rows:[]},h=JSON.stringify(d,void 0,c?2:void 0),c&&(h=h.split("\n").join("\n    ")),v=h.lastIndexOf("]"),i.push(h.substring(0,v)),b=null,g=0,m=!0,w=function(){var e,t,d,h,v,w,O,E;return s(this,(function(s){switch(s.label){case 0:return l&&r.ZP.ignoreTransaction((function(){return l(p)})),[4,(e=null==b?o.limit(f):o.where(":id").above(b).limit(f)).toArray()];case 1:return 0===(t=s.sent()).length?[2,"break"]:(null!=b&&g>0&&(i.push(","),c&&i.push("\n      ")),m=t.length===f,u?(d=y?t.filter((function(e){return y(n,e)})):t,h=d.map((function(e){return A.encapsulate(e)})),A.mustFinalize()?[4,r.ZP.waitFor(A.finalize(h))]:[3,3]):[3,4]);case 2:s.sent(),s.label=3;case 3:return E=JSON.stringify(h,void 0,c?2:void 0),c&&(E=E.split("\n").join("\n      ")),i.push(new Blob([E.substring(1,E.length-1)])),g=d.length,b=t.length>0?r.ZP.getByKeyPath(t[t.length-1],a.keyPath):null,[3,8];case 4:return[4,e.primaryKeys()];case 5:return v=s.sent(),w=v.map((function(e,n){return[e,t[n]]})),y&&(w=w.filter((function(e){var t=e[0],r=e[1];return y(n,r,t)}))),O=w.map((function(e){return A.encapsulate(e)})),A.mustFinalize()?[4,r.ZP.waitFor(A.finalize(O))]:[3,7];case 6:s.sent(),s.label=7;case 7:E=JSON.stringify(O,void 0,c?2:void 0),c&&(E=E.split("\n").join("\n      ")),i.push(new Blob([E.substring(1,E.length-1)])),g=w.length,b=v.length>0?v[v.length-1]:null,s.label=8;case 8:return p.completedRows+=t.length,[2]}}))},O.label=1;case 1:return m?[5,w()]:[3,3];case 2:return"break"===O.sent()?[3,3]:[3,1];case 3:return i.push(h.substr(v)),p.completedTables+=1,p.completedTables<p.totalTables&&i.push(","),[2]}}))},v=0,b=o,m.label=2;case 2:return v<b.length?(g=b[v].name,[5,h(g)]):[3,5];case 3:m.sent(),m.label=4;case 4:return v++,[3,2];case 5:return i.push(a.substr(u)),p.done=!0,l&&r.ZP.ignoreTransaction((function(){return l(p)})),[2]}}))}))}var i,o,c,f,l,p;return s(this,(function(a){switch(a.label){case 0:t=t||{},i=[],o=e.tables.map((function(e){return{name:e.name,schema:u(e),rowCount:0}})),c=t.prettyJson,f={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:o,data:[]}},l=t.progressCallback,p={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return A.finalize(),[7];case 7:return l&&r.ZP.ignoreTransaction((function(){return l(p)})),[2,new Blob(i,{type:"text/json"})]}}))}))}var _=function(){},C=p((function(e,t){!function(e){var t="object"===typeof i&&i.env?i.env:self;e.parser=function(e){return new J(e)},e.CParser=J,e.CStream=K,e.createStream=function(e){return new K(e)},e.MAX_BUFFER_LENGTH=10485760,e.DEBUG="debug"===t.CDEBUG,e.INFO="debug"===t.CDEBUG||"info"===t.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n,r={textNode:void 0,numberNode:""},a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e})),s=0;for(var u in e.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++},e.STATE)e.STATE[e.STATE[u]]=u;s=e.STATE;const c=9,f=10,l=13,p=32,d=34,y=43,h=44,v=45,b=46,g=48,m=57,w=58,O=69,E=91,A=92,S=93,T=97,N=98,j=101,C=102,P=108,x=110,B=114,U=115,I=116,L=117,k=123,R=125;function F(e){for(var t in r)e[t]=r[t]}Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var D=/[\\"\n]/g;function J(t){if(!(this instanceof J))return new J(t);var n=this;F(n),n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=t||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=s.BEGIN,n.stack=new Array,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,n.depth=0,M(n,"onready")}J.prototype={end:function(){Y(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return q(n,"Cannot write after close. Assign an onready handler.");if(null===t)return Y(n);var i=0,o=t.charCodeAt(0),a=n.p;e.DEBUG&&console.log("write -> ["+t+"]");for(;o&&(a=o,n.c=o=t.charCodeAt(i++),a!==o?n.p=a:a=n.p,o);)switch(e.DEBUG&&console.log(i,o,e.STATE[n.state]),n.position++,o===f?(n.line++,n.column=0):n.column++,n.state){case s.BEGIN:o===k?n.state=s.OPEN_OBJECT:o===E?n.state=s.OPEN_ARRAY:z(o)||q(n,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(z(o))continue;if(n.state===s.OPEN_KEY)n.stack.push(s.CLOSE_KEY);else{if(o===R){M(n,"onopenobject"),this.depth++,M(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||s.VALUE;continue}n.stack.push(s.CLOSE_OBJECT)}o===d?n.state=s.STRING:q(n,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(z(o))continue;n.state,s.CLOSE_KEY,o===w?(n.state===s.CLOSE_OBJECT?(n.stack.push(s.CLOSE_OBJECT),V(n,"onopenobject"),this.depth++):V(n,"onkey"),n.state=s.VALUE):o===R?($(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||s.VALUE):o===h?(n.state===s.CLOSE_OBJECT&&n.stack.push(s.CLOSE_OBJECT),V(n),n.state=s.OPEN_KEY):q(n,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(z(o))continue;if(n.state===s.OPEN_ARRAY){if(M(n,"onopenarray"),this.depth++,n.state=s.VALUE,o===S){M(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||s.VALUE;continue}n.stack.push(s.CLOSE_ARRAY)}o===d?n.state=s.STRING:o===k?n.state=s.OPEN_OBJECT:o===E?n.state=s.OPEN_ARRAY:o===I?n.state=s.TRUE:o===C?n.state=s.FALSE:o===x?n.state=s.NULL:o===v?n.numberNode+="-":g<=o&&o<=m?(n.numberNode+=String.fromCharCode(o),n.state=s.NUMBER_DIGIT):q(n,"Bad value");continue;case s.CLOSE_ARRAY:if(o===h)n.stack.push(s.CLOSE_ARRAY),V(n,"onvalue"),n.state=s.VALUE;else if(o===S)$(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||s.VALUE;else{if(z(o))continue;q(n,"Bad array")}continue;case s.STRING:void 0===n.textNode&&(n.textNode="");var u=i-1,c=n.slashed,l=n.unicodeI;e:for(;;){for(e.DEBUG&&console.log(i,o,e.STATE[n.state],c);l>0;)if(n.unicodeS+=String.fromCharCode(o),o=t.charCodeAt(i++),n.position++,4===l?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),l=0,u=i-1):l++,!o)break e;if(o===d&&!c){n.state=n.stack.pop()||s.VALUE,n.textNode+=t.substring(u,i-1),n.position+=i-1-u;break}if(o===A&&!c&&(c=!0,n.textNode+=t.substring(u,i-1),n.position+=i-1-u,o=t.charCodeAt(i++),n.position++,!o))break;if(c){if(c=!1,o===x?n.textNode+="\n":o===B?n.textNode+="\r":o===I?n.textNode+="\t":o===C?n.textNode+="\f":o===N?n.textNode+="\b":o===L?(l=1,n.unicodeS=""):n.textNode+=String.fromCharCode(o),o=t.charCodeAt(i++),n.position++,u=i-1,o)continue;break}D.lastIndex=i;var p=D.exec(t);if(null===p){i=t.length+1,n.textNode+=t.substring(u,i-1),n.position+=i-1-u;break}if(i=p.index+1,!(o=t.charCodeAt(p.index))){n.textNode+=t.substring(u,i-1),n.position+=i-1-u;break}}n.slashed=c,n.unicodeI=l;continue;case s.TRUE:o===B?n.state=s.TRUE2:q(n,"Invalid true started with t"+o);continue;case s.TRUE2:o===L?n.state=s.TRUE3:q(n,"Invalid true started with tr"+o);continue;case s.TRUE3:o===j?(M(n,"onvalue",!0),n.state=n.stack.pop()||s.VALUE):q(n,"Invalid true started with tru"+o);continue;case s.FALSE:o===T?n.state=s.FALSE2:q(n,"Invalid false started with f"+o);continue;case s.FALSE2:o===P?n.state=s.FALSE3:q(n,"Invalid false started with fa"+o);continue;case s.FALSE3:o===U?n.state=s.FALSE4:q(n,"Invalid false started with fal"+o);continue;case s.FALSE4:o===j?(M(n,"onvalue",!1),n.state=n.stack.pop()||s.VALUE):q(n,"Invalid false started with fals"+o);continue;case s.NULL:o===L?n.state=s.NULL2:q(n,"Invalid null started with n"+o);continue;case s.NULL2:o===P?n.state=s.NULL3:q(n,"Invalid null started with nu"+o);continue;case s.NULL3:o===P?(M(n,"onvalue",null),n.state=n.stack.pop()||s.VALUE):q(n,"Invalid null started with nul"+o);continue;case s.NUMBER_DECIMAL_POINT:o===b?(n.numberNode+=".",n.state=s.NUMBER_DIGIT):q(n,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:g<=o&&o<=m?n.numberNode+=String.fromCharCode(o):o===b?(-1!==n.numberNode.indexOf(".")&&q(n,"Invalid number has two dots"),n.numberNode+="."):o===j||o===O?(-1===n.numberNode.indexOf("e")&&-1===n.numberNode.indexOf("E")||q(n,"Invalid number has two exponential"),n.numberNode+="e"):o===y||o===v?(a!==j&&a!==O&&q(n,"Invalid symbol in number"),n.numberNode+=String.fromCharCode(o)):(G(n),i--,n.state=n.stack.pop()||s.VALUE);continue;default:q(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0;for(var o in r){var a=void 0===t[o]?0:t[o].length;a>n&&("text"===o?closeText(t):q(t,"Max buffer length exceeded: "+o)),i=Math.max(i,a)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{n=_}catch(Z){n=function(){}}function K(e){if(!(this instanceof K))return new K(e);this._parser=new J(e),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new o(2),3:new o(3),4:new o(4)},this.string="";var t=this;n.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},a.forEach((function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(n){if(!n)return t.removeAllListeners(e),t._parser["on"+e]=n,n;t.on(e,n)},enumerable:!0,configurable:!1})}))}function M(t,n,r){e.INFO&&console.log("-- emit",n,r),t[n]&&t[n](r)}function $(e,t,n){V(e),M(e,t,n)}function V(e,t){e.textNode=function(e,t){if(void 0===t)return t;e.trim&&(t=t.trim());e.normalize&&(t=t.replace(/\s+/g," "));return t}(e.opt,e.textNode),void 0!==e.textNode&&M(e,t||"onvalue",e.textNode),e.textNode=void 0}function G(e){e.numberNode&&M(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function q(e,t){return V(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=new Error(t),e.error=t,M(e,"onerror",t),e}function Y(e){return e.state===s.VALUE&&0===e.depth||q(e,"Unexpected end"),V(e),e.c="",e.closed=!0,M(e,"onend"),J.call(e,e.opt),e}function z(e){return e===l||e===f||e===p||e===c}K.prototype=Object.create(n.prototype,{constructor:{value:K}}),K.prototype.write=function(e){e=new o(e);for(var t=0;t<e.length;t++){var n=e[t];if(this.bytes_remaining>0){for(var r=0;r<this.bytes_remaining;r++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+r]=e[r];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,t=t+r-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&n>=128){if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+t>e.length){for(var i=0;i<=e.length-1-t;i++)this.temp_buffs[this.bytes_in_sequence][i]=e[t+i];return this.bytes_remaining=t+this.bytes_in_sequence-e.length,!0}this.string=e.slice(t,t+this.bytes_in_sequence).toString(),t=t+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var a=t;a<e.length&&!(e[a]>=128);a++);this.string=e.slice(t,a).toString(),this._parser.write(this.string),this.emit("data",this.string),t=a-1}}},K.prototype.end=function(e){return e&&e.length&&this._parser.write(e.toString()),this._parser.end(),!0},K.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)},K.prototype.destroy=function(){F(this._parser),this.emit("close")}}(t)}));function P(e){var t=0,n=function(e){var t,n,r,i=C.parser(),o=0,a=[],s=!1,u=!1;return i.onopenobject=function(i){var s={incomplete:!0};t||(t=s),n&&(a.push([r,n,u]),e&&(u?n.push(s):n[r]=s)),n=s,r=i,u=!1,++o},i.onkey=function(e){return r=e},i.onvalue=function(e){return u?n.push(e):n[r]=e},i.oncloseobject=function(){var t;if(delete n.incomplete,r=null,0===--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],u=t[2],e||(u?n.push(i):n[r]=i)}},i.onopenarray=function(){var i=[];i.incomplete=!0,t||(t=i),n&&(a.push([r,n,u]),e&&(u?n.push(i):n[r]=i)),n=i,u=!0,r=null,++o},i.onclosearray=function(){var t;if(delete n.incomplete,r=null,0===--o)s=!0;else{var i=n;t=a.pop(),r=t[0],n=t[1],u=t[2],e||(u?n.push(i):n[r]=i)}},{write:function(e){return i.write(e),t},done:function(){return s}}}(!0),r={pullAsync:function(i){return a(this,void 0,void 0,(function(){var o,a,u;return s(this,(function(s){switch(s.label){case 0:return o=e.slice(t,t+i),t+=i,[4,c(o,"text")];case 1:return a=s.sent(),u=n.write(a),r.result=u||{},[2,u]}}))}))},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var a=f(o,"text"),s=n.write(a);return r.result=s||{},s},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function x(e,t){return a(this,void 0,void 0,(function(){var n,i,o,a;return s(this,(function(s){switch(s.label){case 0:return n=(t=t||{}).chunkSizeBytes||1048576,[4,I(e,n)];case 1:return i=s.sent(),o=i.result.data,(a=new r.ZP(o.databaseName)).version(o.databaseVersion).stores(function(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}(o)),[4,U(a,i,t)];case 2:return s.sent(),[2,a]}}))}))}function B(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:t=P(e),n.label=1;case 1:return t.eof()?[3,3]:[4,t.pullAsync(5120)];case 2:return n.sent(),t.result.data&&t.result.data.data?(delete t.result.data.data,[3,3]):[3,1];case 3:return[2,t.result]}}))}))}function U(e,t,n){return a(this,void 0,void 0,(function(){function i(){return a(this,void 0,void 0,(function(){var t,i,a,c;return s(this,(function(y){switch(y.label){case 0:t=function(t){var i,o,a,u,c,f,y,h,v,b,g,m;return s(this,(function(s){switch(s.label){case 0:if(!t.rows)return[2,"break"];if(!t.rows.incomplete&&0===t.rows.length)return[2,"continue"];if(p&&r.ZP.ignoreTransaction((function(){return p(d)})),i=t.tableName,o=e.table(i),a=l.tables.filter((function(e){return e.name===i}))[0].schema,!o){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+t.tableName+" is missing in installed database")}if(!n.acceptChangedPrimaryKey&&a.split(",")[0]!=o.schema.primKey.src)throw new Error("Primary key differs for table "+t.tableName+". ");for(u=t.rows,c=[],f=0;f<u.length&&!(y=u[f]).incomplete;f++)c.push(A.revive(y));return h=n.filter,v=h?t.inbound?c.filter((function(e){return h(i,e)})):c.filter((function(e){var t=e[0],n=e[1];return h(i,n,t)})):c,b=t.inbound?[void 0,v]:[v.map((function(e){return e[0]})),c.map((function(e){return e[1]}))],g=b[0],m=b[1],n.overwriteValues?[4,o.bulkPut(m,g)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,o.bulkAdd(m,g)];case 3:s.sent(),s.label=4;case 4:return d.completedRows+=c.length,c.incomplete||(d.completedTables+=1),u.splice(0,c.length),[2]}}))},i=0,a=l.data,y.label=1;case 1:return i<a.length?(c=a[i],[5,t(c)]):[3,4];case 2:if("break"===y.sent())return[3,4];y.label=3;case 3:return i++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return u.done()||u.eof()?[3,8]:f?(u.pullSync(o),[3,7]):[3,5];case 5:return[4,r.ZP.waitFor(u.pullAsync(o))];case 6:y.sent(),y.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}}))}))}var o,u,c,f,l,p,d,y,h;return s(this,(function(a){switch(a.label){case 0:return o=(n=n||{}).chunkSizeBytes||1048576,[4,I(t,o)];case 1:if(u=a.sent(),c=u.result,f="FileReaderSync"in self,l=c.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is "+e.name+" but export is "+l.databaseName);if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version "+e.verno+" but export is "+l.databaseVersion);if(p=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce((function(e,t){return e+t.rowCount}),0),totalTables:l.tables.length},p&&r.ZP.ignoreTransaction((function(){return p(d)})),!n.clearTablesBeforeImport)return[3,5];y=0,h=e.tables,a.label=2;case 2:return y<h.length?[4,h[y].clear()]:[3,5];case 3:a.sent(),a.label=4;case 4:return y++,[3,2];case 5:return n.noTransaction?[4,i()]:[3,7];case 6:return a.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,i)];case 8:a.sent(),a.label=9;case 9:return d.done=!0,p&&r.ZP.ignoreTransaction((function(){return p(d)})),[2]}}))}))}function I(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:n="slice"in e?P(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(!(r=n.result)||"dexie"!=r.formatName)throw new Error("Given file is not a dexie export");if(r.formatVersion>1)throw new Error("Format version "+r.formatVersion+" not supported");if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}}))}))}r.ZP.prototype.export=function(e){return j(this,e)},r.ZP.prototype.import=function(e,t){return U(this,e,t)},r.ZP.import=function(e,t){return x(e,t)};t.default=function(){throw new Error("This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.")}}}]);